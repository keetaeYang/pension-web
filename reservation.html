<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>예약 문의 - 삽교호펜션</title>
  <meta name="description" content="삽교호펜션 예약을 원하시나요? 간편한 예약 폼을 통해 문의해주세요. 빠른 답변을 드리겠습니다.">
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <div id="header"></div>
  
  <main class="page-container">
    <div class="page-header">
      <h1>예약 문의</h1>
      <p class="page-subtitle">간편한 예약 시스템으로 편리하게 문의하세요</p>
    </div>

    <div class="reservation-container">
      <!-- Reservation Form -->
      <div class="form-section">
        <form class="modern-reservation-form" id="reservationForm" novalidate>
          <div class="form-header">
            <h2>🌿 예약 정보</h2>
            <p>선택하신 객실 정보를 확인하고 예약 문의를 남겨주세요</p>
          </div>

          <!-- Selected Room Display -->
          <div class="selected-room" id="selectedRoomDisplay" style="display: none;">
            <h3>선택한 객실</h3>
            <div class="room-info">
              <span class="room-name" id="selectedRoomName"></span>
              <span class="room-change">
                <a href="room.html">객실 변경하기</a>
              </span>
            </div>
          </div>

          <!-- Form Fields -->
          <div class="form-grid">
            <div class="form-group">
              <label for="guestName">
                <span class="label-text">👤 성함 *</span>
                <input 
                  type="text" 
                  id="guestName" 
                  name="guestName" 
                  placeholder="예약자 성함을 입력해주세요" 
                  required
                  autocomplete="name"
                />
                <span class="error-message" id="nameError"></span>
              </label>
            </div>

            <div class="form-group">
              <label for="phone">
                <span class="label-text">📞 연락처 *</span>
                <input 
                  type="tel" 
                  id="phone" 
                  name="phone" 
                  placeholder="010-0000-0000" 
                  required
                  autocomplete="tel"
                />
                <span class="error-message" id="phoneError"></span>
              </label>
            </div>

            <div class="form-group">
              <label for="checkIn">
                <span class="label-text">📅 체크인 날짜 *</span>
                <input 
                  type="date" 
                  id="checkIn" 
                  name="checkIn" 
                  required
                />
                <span class="error-message" id="checkInError"></span>
              </label>
            </div>

            <div class="form-group">
              <label for="checkOut">
                <span class="label-text">📅 체크아웃 날짜 *</span>
                <input 
                  type="date" 
                  id="checkOut" 
                  name="checkOut" 
                  required
                />
                <span class="error-message" id="checkOutError"></span>
              </label>
            </div>

            <div class="form-group">
              <label for="guests">
                <span class="label-text">👥 인원수 *</span>
                <select id="guests" name="guests" required>
                  <option value="">인원을 선택해주세요</option>
                  <option value="1">1명</option>
                  <option value="2">2명</option>
                  <option value="3">3명</option>
                  <option value="4">4명</option>
                  <option value="5">5명</option>
                  <option value="6">6명</option>
                  <option value="more">6명 이상</option>
                </select>
                <span class="error-message" id="guestsError"></span>
              </label>
            </div>

            <div class="form-group">
              <label for="roomPreference">
                <span class="label-text">🏠 선호 객실</span>
                <select id="roomPreference" name="roomPreference">
                  <option value="">객실을 선택해주세요</option>
                  <option value="패밀리룸">패밀리룸 (₩120,000/박)</option>
                  <option value="커플룸">커플룸 (₩80,000/박)</option>
                  <option value="온돌룸">온돌룸 (₩100,000/박)</option>
                </select>
              </label>
            </div>
          </div>

          <div class="form-group full-width">
            <label for="specialRequests">
              <span class="label-text">💬 특별 요청사항</span>
              <textarea 
                id="specialRequests" 
                name="specialRequests" 
                rows="4" 
                placeholder="특별한 요청사항이나 궁금한 점이 있으시면 자유롭게 남겨주세요&#10;예) 생일 기념, 특별한 어메니티 요청, 늦은 체크인 등"
              ></textarea>
            </label>
          </div>

          <!-- Contact Method -->
          <div class="contact-method">
            <h3>📱 선호하는 연락 방법</h3>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="contactMethod" value="phone" checked>
                <span class="radio-custom"></span>
                전화 연락
              </label>
              <label class="radio-option">
                <input type="radio" name="contactMethod" value="kakao">
                <span class="radio-custom"></span>
                카카오톡
              </label>
              <label class="radio-option">
                <input type="radio" name="contactMethod" value="email">
                <span class="radio-custom"></span>
                이메일
              </label>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-large submit-btn">
              <span class="btn-text">예약 문의하기</span>
              <span class="btn-loading" style="display: none;">처리 중...</span>
            </button>
            <p class="form-note">
              * 예약 문의 후 1시간 내에 연락드리겠습니다<br>
              * 최종 예약 확정은 전화 상담 후 진행됩니다
            </p>
          </div>
        </form>
      </div>

      <!-- Contact Info Sidebar -->
      <aside class="contact-sidebar">
        <div class="contact-card">
          <h3>📞 직접 문의</h3>
          <div class="contact-item">
            <strong>전화 문의</strong>
            <a href="tel:041-xxx-xxxx">041-XXX-XXXX</a>
            <span class="contact-time">운영시간: 09:00 - 21:00</span>
          </div>
          <div class="contact-item">
            <strong>카카오톡</strong>
            <span>@삽교호펜션</span>
            <span class="contact-time">24시간 접수 (답변은 운영시간 내)</span>
          </div>
        </div>

        <div class="info-card">
          <h3>🕐 이용 안내</h3>
          <div class="info-list">
            <div class="info-item">
              <span class="info-label">체크인</span>
              <span class="info-value">15:00 ~</span>
            </div>
            <div class="info-item">
              <span class="info-label">체크아웃</span>
              <span class="info-value">~ 11:00</span>
            </div>
            <div class="info-item">
              <span class="info-label">취소 정책</span>
              <span class="info-value">2일 전까지 무료</span>
            </div>
            <div class="info-item">
              <span class="info-label">반려동물</span>
              <span class="info-value">사전 문의 필수</span>
            </div>
          </div>
        </div>

        <div class="promotion-card">
          <h3>🎉 이벤트</h3>
          <div class="promotion-item">
            <span class="promotion-title">연박 할인</span>
            <span class="promotion-desc">2박 이상 시 10% 할인</span>
          </div>
          <div class="promotion-item">
            <span class="promotion-title">생일 기념</span>
            <span class="promotion-desc">생일 인증 시 케이크 서비스</span>
          </div>
        </div>
      </aside>
    </div>
  </main>
  
  <div id="footer"></div>
  
  <script>
    // Header/Footer 로드
    fetch('components/header.html')
      .then(res => res.text())
      .then(data => document.getElementById('header').innerHTML = data);
    fetch('components/footer.html')
      .then(res => res.text())
      .then(data => document.getElementById('footer').innerHTML = data);

    // Form Functionality
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('reservationForm');
      const checkInInput = document.getElementById('checkIn');
      const checkOutInput = document.getElementById('checkOut');
      
      // Set minimum date to today
      const today = new Date().toISOString().split('T')[0];
      checkInInput.min = today;
      checkOutInput.min = today;
      
      // Update checkout minimum date when checkin changes
      checkInInput.addEventListener('change', function() {
        const checkInDate = new Date(this.value);
        checkInDate.setDate(checkInDate.getDate() + 1);
        checkOutInput.min = checkInDate.toISOString().split('T')[0];
        
        if (checkOutInput.value && checkOutInput.value <= this.value) {
          checkOutInput.value = checkInDate.toISOString().split('T')[0];
        }
      });

      // Load selected room from localStorage
      const selectedRoom = localStorage.getItem('selectedRoom');
      if (selectedRoom) {
        document.getElementById('selectedRoomDisplay').style.display = 'block';
        document.getElementById('selectedRoomName').textContent = selectedRoom;
        document.getElementById('roomPreference').value = selectedRoom;
      }

      // Form validation
      function validateForm() {
        let isValid = true;
        const requiredFields = ['guestName', 'phone', 'checkIn', 'checkOut', 'guests'];
        
        requiredFields.forEach(fieldName => {
          const field = document.getElementById(fieldName);
          const errorElement = document.getElementById(fieldName + 'Error');
          
          if (!field.value.trim()) {
            errorElement.textContent = '이 필드는 필수입니다.';
            field.classList.add('error');
            isValid = false;
          } else {
            errorElement.textContent = '';
            field.classList.remove('error');
          }
        });

        // Phone validation
        const phone = document.getElementById('phone');
        const phonePattern = /^01[016789]-?\d{3,4}-?\d{4}$/;
        if (phone.value && !phonePattern.test(phone.value.replace(/-/g, ''))) {
          document.getElementById('phoneError').textContent = '올바른 전화번호 형식을 입력해주세요.';
          phone.classList.add('error');
          isValid = false;
        }

        // Date validation
        const checkIn = new Date(checkInInput.value);
        const checkOut = new Date(checkOutInput.value);
        if (checkIn >= checkOut) {
          document.getElementById('checkOutError').textContent = '체크아웃 날짜는 체크인 날짜보다 늦어야 합니다.';
          checkOutInput.classList.add('error');
          isValid = false;
        }

        return isValid;
      }

      // Form submission
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        if (validateForm()) {
          const submitBtn = document.querySelector('.submit-btn');
          const btnText = submitBtn.querySelector('.btn-text');
          const btnLoading = submitBtn.querySelector('.btn-loading');
          
          // Show loading state
          submitBtn.disabled = true;
          btnText.style.display = 'none';
          btnLoading.style.display = 'inline';
          
          // Simulate form submission
          setTimeout(() => {
            alert('예약 문의가 성공적으로 접수되었습니다!\n1시간 내에 연락드리겠습니다.');
            form.reset();
            localStorage.removeItem('selectedRoom');
            document.getElementById('selectedRoomDisplay').style.display = 'none';
            
            // Reset button state
            submitBtn.disabled = false;
            btnText.style.display = 'inline';
            btnLoading.style.display = 'none';
          }, 2000);
        }
      });

      // Real-time validation
      const inputs = form.querySelectorAll('input, select, textarea');
      inputs.forEach(input => {
        input.addEventListener('blur', validateForm);
        input.addEventListener('input', function() {
          if (this.classList.contains('error')) {
            this.classList.remove('error');
            const errorElement = document.getElementById(this.name + 'Error');
            if (errorElement) errorElement.textContent = '';
          }
        });
      });
    });
  </script>
</body>
</html>